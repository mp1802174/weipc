2025-05-31 15:56:37,373 - __main__ - INFO - 开始测试优化后的内容提取...
2025-05-31 15:56:39,891 - cfcj.auth - INFO - 认证数据加载成功
2025-05-31 15:56:39,892 - __main__ - INFO - 测试URL: https://linux.do/t/topic/691043
2025-05-31 15:56:39,892 - __main__ - INFO - 开始采集页面...
2025-05-31 15:56:39,893 - cfcj.api - INFO - 开始采集文章: https://linux.do/t/topic/691043
2025-05-31 15:56:39,893 - cfcj.crawler - INFO - 启动浏览器，使用驱动: drission
2025-05-31 15:56:39,894 - cfcj.crawler - INFO - 正在配置Chrome选项...
2025-05-31 15:56:39,898 - cfcj.crawler - INFO - 正在启动Chrome浏览器...
2025-05-31 15:56:41,665 - cfcj.crawler - INFO - Chrome浏览器启动成功
2025-05-31 15:56:41,831 - cfcj.crawler - INFO - 正在加载保存的cookies...
2025-05-31 15:56:41,910 - cfcj.crawler - INFO - Cookies加载准备完成
2025-05-31 15:56:41,928 - cfcj.crawler - INFO - 正在访问: https://linux.do/t/topic/691043 (尝试 1/2)
2025-05-31 15:56:41,932 - cfcj.crawler - INFO - 正在访问页面: https://linux.do/t/topic/691043
2025-05-31 15:56:53,064 - cfcj.auth - INFO - Cookies加载到页面完成，共加载 40 个cookies
2025-05-31 15:56:55,315 - cfcj.crawler - INFO - 页面访问成功，正在检查Cloudflare...
2025-05-31 15:56:55,317 - cfcj.crawler - INFO - 检查Cloudflare验证状态...
2025-05-31 15:57:03,341 - cfcj.crawler - INFO - 未检测到Cloudflare验证页面
2025-05-31 15:57:07,349 - cfcj.crawler - INFO - 等待页面加载完成 (2秒)...
2025-05-31 15:57:09,383 - cfcj.crawler - INFO - 页面内容获取成功，长度: 18064 字符
2025-05-31 15:57:09,389 - cfcj.api - ERROR - 采集文章失败: 'ContentExtractor' object has no attribute 'logger'
2025-05-31 15:57:09,417 - cfcj.auth - INFO - 认证数据保存成功
2025-05-31 15:57:09,421 - cfcj.auth - INFO - 从页面保存cookies完成
2025-05-31 15:57:10,440 - cfcj.crawler - INFO - 浏览器已关闭
2025-05-31 15:57:10,441 - __main__ - ERROR - 测试失败: 采集文章失败: 'ContentExtractor' object has no attribute 'logger'
2025-05-31 15:57:10,448 - __main__ - ERROR - 详细错误信息:
Traceback (most recent call last):
  File "D:\kf\weipc\wz\cfcj\api.py", line 84, in crawl_article
    article_data = self.extractor.extract_article(html_content, url)
  File "D:\kf\weipc\wz\cfcj\core\extractor.py", line 47, in extract_article
    'content': self._extract_content(soup, url),
               ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\kf\weipc\wz\cfcj\core\extractor.py", line 106, in _extract_content
    return self._extract_linux_do_content(soup)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "D:\kf\weipc\wz\cfcj\core\extractor.py", line 349, in _extract_linux_do_content
    self.logger.debug("开始提取linux.do主贴内容")
    ^^^^^^^^^^^
AttributeError: 'ContentExtractor' object has no attribute 'logger'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\kf\weipc\wz\cfcj\test_optimized.py", line 57, in test_optimized_extraction
    result = api.crawl_article(test_url)
  File "D:\kf\weipc\wz\cfcj\api.py", line 91, in crawl_article
    raise CFCJError(f"采集文章失败: {e}")
wz.cfcj.utils.exceptions.CFCJError: 采集文章失败: 'ContentExtractor' object has no attribute 'logger'

2025-05-31 16:06:04,817 - __main__ - INFO - 开始测试优化后的内容提取...
2025-05-31 16:06:06,902 - cfcj.auth - INFO - 认证数据加载成功
2025-05-31 16:06:06,903 - __main__ - INFO - 测试URL: https://linux.do/t/topic/691043
2025-05-31 16:06:06,903 - __main__ - INFO - 开始采集页面...
2025-05-31 16:06:06,904 - cfcj.api - INFO - 开始采集文章: https://linux.do/t/topic/691043
2025-05-31 16:06:06,904 - cfcj.crawler - INFO - 启动浏览器，使用驱动: drission
2025-05-31 16:06:06,906 - cfcj.crawler - INFO - 正在配置Chrome选项...
2025-05-31 16:06:06,910 - cfcj.crawler - INFO - 正在启动Chrome浏览器...
2025-05-31 16:06:08,728 - cfcj.crawler - INFO - Chrome浏览器启动成功
2025-05-31 16:06:08,734 - cfcj.crawler - INFO - 正在加载保存的cookies...
2025-05-31 16:06:08,735 - cfcj.crawler - INFO - Cookies加载准备完成
2025-05-31 16:06:08,737 - cfcj.crawler - INFO - 正在访问: https://linux.do/t/topic/691043 (尝试 1/2)
2025-05-31 16:06:08,738 - cfcj.crawler - INFO - 正在访问页面: https://linux.do/t/topic/691043
2025-05-31 16:06:21,320 - cfcj.auth - INFO - Cookies加载到页面完成，共加载 49 个cookies
2025-05-31 16:06:22,719 - cfcj.crawler - INFO - 页面访问成功，正在检查Cloudflare...
2025-05-31 16:06:22,724 - cfcj.crawler - INFO - 检查Cloudflare验证状态...
2025-05-31 16:06:30,769 - cfcj.crawler - INFO - 未检测到Cloudflare验证页面
2025-05-31 16:06:34,781 - cfcj.crawler - INFO - 等待页面加载完成 (2秒)...
2025-05-31 16:06:36,793 - cfcj.crawler - INFO - 页面内容获取成功，长度: 18064 字符
2025-05-31 16:06:36,798 - wz.cfcj.core.extractor.ContentExtractor - WARNING - 未找到主贴容器，尝试备用选择器
2025-05-31 16:06:36,802 - wz.cfcj.core.extractor.ContentExtractor - ERROR - 无法找到主贴容器
2025-05-31 16:06:36,818 - wz.cfcj.core.extractor.ContentExtractor - WARNING - 未找到主贴容器，无法提取图片
2025-05-31 16:06:36,820 - cfcj.api - INFO - 文章采集成功: Web server is returning an unknown error
2025-05-31 16:06:36,855 - cfcj.auth - INFO - 认证数据保存成功
2025-05-31 16:06:36,856 - cfcj.auth - INFO - 从页面保存cookies完成
2025-05-31 16:06:37,898 - cfcj.crawler - INFO - 浏览器已关闭
2025-05-31 16:06:37,901 - __main__ - INFO - 采集完成! 耗时: 31.00秒
2025-05-31 16:06:37,905 - __main__ - INFO - 标题: Web server is returning an unknown error
2025-05-31 16:06:37,908 - __main__ - INFO - 内容长度: 285 字符
2025-05-31 16:06:37,911 - __main__ - INFO - 图片数量: 0
2025-05-31 16:06:37,914 - __main__ - INFO - 
=== 内容质量分析 ===
2025-05-31 16:06:37,916 - __main__ - INFO - ✅ 内容中未发现回复元素
2025-05-31 16:06:37,918 - __main__ - INFO - 内容预览:
Web server is returning an unknown error There is an unknown connection issue between Cloudflare and the origin web server. As a result, the web page can not be displayed. Ray ID: 9484f9045e4ca3bf You...
2025-05-31 16:06:37,930 - __main__ - INFO - 
=== 图片分析 ===
2025-05-31 16:06:37,936 - __main__ - INFO - 共提取到 0 张图片
2025-05-31 16:06:37,938 - __main__ - INFO - 内容图片: 0 张
2025-05-31 16:06:37,940 - __main__ - INFO - 头像图片: 0 张
2025-05-31 16:06:37,946 - __main__ - INFO - 结果已保存到: D:\kf\weipc\wz\cfcj\optimized_result.json
2025-05-31 16:08:13,729 - __main__ - INFO - 开始测试优化后的内容提取...
2025-05-31 16:08:15,829 - cfcj.auth - INFO - 认证数据加载成功
2025-05-31 16:08:15,829 - __main__ - INFO - 测试URL: https://linux.do/t/topic/690973
2025-05-31 16:08:15,830 - __main__ - INFO - 开始采集页面...
2025-05-31 16:08:15,830 - cfcj.api - INFO - 开始采集文章: https://linux.do/t/topic/690973
2025-05-31 16:08:15,831 - cfcj.crawler - INFO - 启动浏览器，使用驱动: drission
2025-05-31 16:08:15,832 - cfcj.crawler - INFO - 正在配置Chrome选项...
2025-05-31 16:08:15,836 - cfcj.crawler - INFO - 正在启动Chrome浏览器...
2025-05-31 16:08:17,607 - cfcj.crawler - INFO - Chrome浏览器启动成功
2025-05-31 16:08:17,609 - cfcj.crawler - INFO - 正在加载保存的cookies...
2025-05-31 16:08:17,611 - cfcj.crawler - INFO - Cookies加载准备完成
2025-05-31 16:08:17,620 - cfcj.crawler - INFO - 正在访问: https://linux.do/t/topic/690973 (尝试 1/2)
2025-05-31 16:08:17,623 - cfcj.crawler - INFO - 正在访问页面: https://linux.do/t/topic/690973
2025-05-31 16:08:29,120 - cfcj.auth - INFO - Cookies加载到页面完成，共加载 58 个cookies
2025-05-31 16:08:30,135 - cfcj.crawler - INFO - 页面访问成功，正在检查Cloudflare...
2025-05-31 16:08:30,138 - cfcj.crawler - INFO - 检查Cloudflare验证状态...
2025-05-31 16:08:38,156 - cfcj.crawler - INFO - 未检测到Cloudflare验证页面
2025-05-31 16:08:42,177 - cfcj.crawler - INFO - 等待页面加载完成 (2秒)...
2025-05-31 16:08:44,185 - cfcj.crawler - INFO - 页面内容获取成功，长度: 618 字符
2025-05-31 16:08:44,190 - wz.cfcj.core.extractor.ContentExtractor - WARNING - 未找到主贴容器，尝试备用选择器
2025-05-31 16:08:44,192 - wz.cfcj.core.extractor.ContentExtractor - ERROR - 无法找到主贴容器
2025-05-31 16:08:44,201 - wz.cfcj.core.extractor.ContentExtractor - WARNING - 未找到主贴容器，无法提取图片
2025-05-31 16:08:44,204 - cfcj.api - INFO - 文章采集成功: 400 Bad Request
2025-05-31 16:08:44,256 - cfcj.auth - INFO - 认证数据保存成功
2025-05-31 16:08:44,257 - cfcj.auth - INFO - 从页面保存cookies完成
2025-05-31 16:08:45,310 - cfcj.crawler - INFO - 浏览器已关闭
2025-05-31 16:08:45,312 - __main__ - INFO - 采集完成! 耗时: 29.48秒
2025-05-31 16:08:45,313 - __main__ - INFO - 标题: 400 Bad Request
2025-05-31 16:08:45,313 - __main__ - INFO - 内容长度: 0 字符
2025-05-31 16:08:45,314 - __main__ - INFO - 图片数量: 0
2025-05-31 16:08:45,314 - __main__ - INFO - 
=== 内容质量分析 ===
2025-05-31 16:08:45,315 - __main__ - INFO - ✅ 内容中未发现回复元素
2025-05-31 16:08:45,316 - __main__ - INFO - 
=== 图片分析 ===
2025-05-31 16:08:45,319 - __main__ - INFO - 共提取到 0 张图片
2025-05-31 16:08:45,320 - __main__ - INFO - 内容图片: 0 张
2025-05-31 16:08:45,320 - __main__ - INFO - 头像图片: 0 张
2025-05-31 16:08:45,322 - __main__ - INFO - 结果已保存到: D:\kf\weipc\wz\cfcj\optimized_result.json
2025-05-31 16:20:27,309 - __main__ - INFO - 开始测试优化后的内容提取...
2025-05-31 16:20:29,621 - __main__ - INFO - 测试URL: https://linux.do/t/topic/690973
2025-05-31 16:20:29,622 - __main__ - INFO - 开始采集页面...
2025-05-31 16:20:29,622 - cfcj.api - INFO - 开始采集文章: https://linux.do/t/topic/690973
2025-05-31 16:20:29,623 - cfcj.crawler - INFO - 启动浏览器，使用驱动: drission
2025-05-31 16:20:29,626 - cfcj.crawler - INFO - 正在配置Chrome选项...
2025-05-31 16:20:29,638 - cfcj.crawler - INFO - 正在启动Chrome浏览器...
2025-05-31 16:20:31,572 - cfcj.crawler - INFO - Chrome浏览器启动成功
2025-05-31 16:20:31,574 - cfcj.crawler - INFO - 正在加载保存的cookies...
2025-05-31 16:20:31,583 - cfcj.crawler - INFO - Cookies加载准备完成
2025-05-31 16:20:31,586 - cfcj.crawler - INFO - 正在访问: https://linux.do/t/topic/690973 (尝试 1/2)
2025-05-31 16:20:31,587 - cfcj.crawler - INFO - 正在访问页面: https://linux.do/t/topic/690973
2025-05-31 16:20:40,542 - cfcj.crawler - INFO - 页面访问成功，正在检查Cloudflare...
2025-05-31 16:20:40,544 - cfcj.crawler - INFO - 检查Cloudflare验证状态...
2025-05-31 16:20:48,792 - cfcj.crawler - INFO - 未检测到Cloudflare验证页面
2025-05-31 16:20:52,845 - cfcj.crawler - INFO - 等待页面加载完成 (2秒)...
2025-05-31 16:20:55,919 - cfcj.crawler - INFO - 页面内容获取成功，长度: 1122403 字符
2025-05-31 16:20:57,762 - cfcj.api - INFO - 文章采集成功: 有用过thinbook14+的吗，体验如何？
2025-05-31 16:20:57,770 - cfcj.auth - WARNING - 没有有效的cookies可保存
2025-05-31 16:20:58,822 - cfcj.crawler - INFO - 浏览器已关闭
2025-05-31 16:20:58,826 - __main__ - INFO - 采集完成! 耗时: 29.20秒
2025-05-31 16:20:58,827 - __main__ - INFO - 标题: 有用过thinbook14+的吗，体验如何？
2025-05-31 16:20:58,829 - __main__ - INFO - 内容长度: 63 字符
2025-05-31 16:20:58,830 - __main__ - INFO - 图片数量: 0
2025-05-31 16:20:58,831 - __main__ - INFO - 
=== 内容质量分析 ===
2025-05-31 16:20:58,833 - __main__ - INFO - ✅ 内容中未发现回复元素
2025-05-31 16:20:58,835 - __main__ - INFO - 内容预览:
如题，想入手thinkbook14+，还在纠结。要不要加一点钱上ThinkPad t14p呢？感觉这两个比其他品牌同尺寸要重。
2025-05-31 16:20:58,837 - __main__ - INFO - 
=== 图片分析 ===
2025-05-31 16:20:58,838 - __main__ - INFO - 共提取到 0 张图片
2025-05-31 16:20:58,840 - __main__ - INFO - 内容图片: 0 张
2025-05-31 16:20:58,842 - __main__ - INFO - 头像图片: 0 张
2025-05-31 16:20:58,855 - __main__ - INFO - 结果已保存到: D:\kf\weipc\wz\cfcj\optimized_result.json
